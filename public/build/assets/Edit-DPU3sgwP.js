import{r as p,m as I,j as e,L as F,$ as L}from"./app-B_H1sTXa.js";import{A as P}from"./AuthenticatedLayout-BTNYEmlU.js";import{I as r}from"./InputLabel-BX0P0eNU.js";import"./TextInput-OFQM4A8H.js";import{I as l}from"./InputError-BCTRyRV3.js";import{P as C}from"./PrimaryButton-BcBVvMXy.js";import{T as S,a as h}from"./tabview.esm-BFutkbjR.js";import{D as n}from"./dropdown.esm-COSQCgxg.js";import{I as T}from"./inputtextarea.esm-BzK3T2KJ.js";import{F as k}from"./fileupload.esm-Bj2siJmu.js";import"./ApplicationLogo-KP1B-3Qc.js";import"./transition-ClnC5tZK.js";import"./inputtext.esm-B6seoT3Q.js";import"./index.esm-DxxmVuf0.js";import"./keyfilter.esm-BsAdckhT.js";import"./button.esm-CvM3T8wv.js";import"./index.esm-CvXa7yzG.js";import"./csstransition.esm-N-po8r9f.js";import"./index.esm-N8m5rv-0.js";import"./index.esm-Degx2bK-.js";function Z({auth:x,comment:a,posts:g,users:j,warehousePosts:_}){const[c,u]=p.useState(a.image_path?`/storage/${a.image_path}`:null),[b,f]=p.useState(a.post_id?0:1),{data:o,setData:t,post:v,processing:w,errors:i}=I({content:a.content,post_id:a.post_id||"",warehouse_post_id:a.warehouse_post_id||"",user_id:a.user_id,image:null,_method:"put"}),N=s=>{s.preventDefault(),v(route("admin.comments.update",a.id))},y=s=>{const d=s.files[0];if(t("image",d),d){const m=new FileReader;m.onloadend=()=>{u(m.result)},m.readAsDataURL(d)}else u(a.image_path?`/storage/${a.image_path}`:null)};return e.jsxs(P,{user:x.user,header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"コメント編集"}),children:[e.jsx(F,{title:"コメント編集"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 bg-white border-b border-gray-200",children:e.jsxs("form",{onSubmit:N,children:[e.jsxs(S,{activeIndex:b,onTabChange:s=>{f(s.index),s.index===0?t("warehouse_post_id",""):t("post_id","")},children:[e.jsx(h,{header:"投稿コメント",children:e.jsxs("div",{className:"mb-4",children:[e.jsx(r,{htmlFor:"post_id",value:"投稿"}),e.jsx(n,{id:"post_id",name:"post_id",value:o.post_id,options:g.map(s=>({label:s.title,value:s.id})),onChange:s=>{t("post_id",s.value)},placeholder:"投稿を選択",className:"block mt-1 w-full",filter:!0,filterPlaceholder:"検索..."}),e.jsx(l,{message:i.post_id,className:"mt-2"})]})}),e.jsx(h,{header:"倉庫投稿コメント",children:e.jsxs("div",{className:"mb-4",children:[e.jsx(r,{htmlFor:"warehouse_post_id",value:"倉庫投稿"}),e.jsx(n,{id:"warehouse_post_id",name:"warehouse_post_id",value:o.warehouse_post_id,options:_.map(s=>({label:s.title,value:s.id})),onChange:s=>{t("warehouse_post_id",s.value)},placeholder:"倉庫投稿を選択",className:"block mt-1 w-full",filter:!0,filterPlaceholder:"検索..."}),e.jsx(l,{message:i.warehouse_post_id,className:"mt-2"})]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(r,{htmlFor:"user_id",value:"ユーザー"}),e.jsx(n,{id:"user_id",name:"user_id",value:o.user_id,options:j.map(s=>({label:s.name,value:s.id})),onChange:s=>t("user_id",s.value),placeholder:"ユーザーを選択",className:"block mt-1 w-full",filter:!0,filterPlaceholder:"検索..."}),e.jsx(l,{message:i.user_id,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(r,{htmlFor:"content",value:"コンテンツ"}),e.jsx(T,{id:"content",name:"content",value:o.content,onChange:s=>t("content",s.target.value),rows:5,className:"block p-2 mt-1 w-full",autoResize:!0}),e.jsx(l,{message:i.content,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(r,{htmlFor:"image",value:"画像"}),e.jsx(k,{id:"image",name:"image",accept:"image/*",maxFileSize:2e6,emptyTemplate:e.jsx("p",{className:"m-0",children:"ここに画像をドラッグ&ドロップするか、クリックしてアップロードしてください。"}),onSelect:y,chooseLabel:"選択",uploadLabel:"アップロード",cancelLabel:"キャンセル",className:"mt-1",auto:!0,customUpload:!0,uploadHandler:s=>s.options.clear()}),e.jsx(l,{message:i.image,className:"mt-2"}),c&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"プレビュー:"}),e.jsx("img",{src:c,alt:"プレビュー",className:"object-contain max-w-xs max-h-48 rounded-md"})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-6",children:[e.jsx(L,{href:route("admin.comments.index"),className:"inline-flex items-center px-4 py-2 text-xs font-semibold tracking-widest text-gray-700 uppercase bg-gray-300 rounded-md border border-transparent transition duration-150 ease-in-out hover:bg-gray-400 active:bg-gray-400 focus:outline-none focus:border-gray-500 focus:shadow-outline-gray",children:"キャンセル"}),e.jsx(C,{type:"submit",disabled:w,children:"更新"})]})]})})})})})]})}export{Z as default};
