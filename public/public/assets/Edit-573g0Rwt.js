import{r as g,m as N,j as e,L as w}from"./app-Brt7EZNP.js";import{A as b}from"./AuthenticatedLayout-3E0YaIke.js";import{I as r}from"./InputError-BYpYqRrS.js";import{I as s}from"./InputLabel-D1U0hF6w.js";import{P as y}from"./PrimaryButton-BJcW6R7D.js";import{T as F}from"./TextInput-Ct-yI7GR.js";import{D as L}from"./dropdown.esm-BRPwmJLB.js";import{F as P}from"./fileupload.esm-DrQI_dCm.js";import{I as _}from"./inputtextarea.esm-DVpv4M8C.js";import"./ApplicationLogo-DrFb5_q6.js";import"./transition-Db6AheMs.js";import"./button.esm-aq_fVy9n.js";import"./index.esm-DgRHuPSh.js";import"./inputtext.esm-B9ruA9or.js";import"./keyfilter.esm-D9TtOtmd.js";import"./csstransition.esm-Dy1zVw1G.js";import"./index.esm-BtThlGHU.js";import"./index.esm-84gqDqFK.js";function M({post:a,warehouses:d}){const[n,u]=g.useState(a.photo?`/storage/${a.photo}`:null),{data:m,setData:l,post:h,processing:p,errors:o,reset:x}=N({title:a.title,content:a.content,warehouse_id:a.warehouse_id,photo:null,_method:"PATCH"}),j=t=>{t.preventDefault(),h(route("warehouse.posts.update",a.id),{onSuccess:()=>x()})},v=t=>{const i=t.files[0];if(i){l("photo",i);const c=new FileReader;c.onload=f=>{u(f.target.result)},c.readAsDataURL(i)}};return e.jsxs(b,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"倉庫掲示板投稿編集"}),children:[e.jsx(w,{title:"倉庫掲示板投稿編集"}),e.jsx("div",{className:"py-12 pt-4",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 text-gray-900",children:e.jsxs("form",{onSubmit:j,encType:"multipart/form-data",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(s,{htmlFor:"title",value:"タイトル"}),e.jsx(F,{id:"title",type:"text",name:"title",value:m.title,className:"block mt-1 w-full",onChange:t=>l("title",t.target.value),required:!0}),e.jsx(r,{message:o.title,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(s,{htmlFor:"warehouse_id",value:"倉庫"}),e.jsx(L,{id:"warehouse_id",value:m.warehouse_id,options:d.map(t=>({label:t.name,value:t.id})),onChange:t=>l("warehouse_id",t.value),placeholder:"倉庫を選択",className:"block mt-1 w-full",required:!0}),e.jsx(r,{message:o.warehouse_id,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(s,{htmlFor:"content",value:"内容"}),e.jsx(_,{id:"content",value:m.content,onChange:t=>l("content",t.target.value),style:{height:"320px"},className:"block p-2 mt-1 w-full",rows:10}),e.jsx(r,{message:o.content,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(s,{htmlFor:"photo",value:"写真（オプション）"}),e.jsx(P,{id:"photo",name:"photo",accept:"image/*",maxFileSize:2e6,emptyTemplate:e.jsx("p",{className:"m-0",children:"ここに画像をドラッグ＆ドロップするか、選択ボタンをクリックしてください。"}),chooseLabel:"選択",uploadLabel:"アップロード",cancelLabel:"キャンセル",className:"mt-1",onSelect:v,auto:!0,customUpload:!0,uploadHandler:t=>t.options.clear()}),e.jsx(r,{message:o.photo,className:"mt-2"})]}),n&&e.jsxs("div",{className:"mb-4",children:[e.jsx(s,{value:"プレビュー"}),e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:n,alt:"Preview",className:"max-w-full h-auto",style:{maxHeight:"200px"}})})]}),e.jsx("div",{className:"flex justify-end items-center mt-4",children:e.jsx(y,{className:"ml-4",disabled:p,children:"更新する"})})]})})})})})]})}export{M as default};
