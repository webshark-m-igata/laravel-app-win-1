import{r as a,m as y,j as e,L as F,S as L}from"./app-yTh-YxTC.js";import{A as I}from"./AuthenticatedLayout-C_1Nqe5A.js";import{I as i}from"./InputLabel-CraIE3uT.js";import{T as P}from"./TextInput-C5NCLnli.js";import"./TextArea-kjxygfO0.js";import{S as C}from"./SelectInput-DYm0aztJ.js";import{I as n}from"./InputError-B2TmcUpv.js";import{P as _}from"./PrimaryButton-wFxxeskN.js";import{F as E}from"./fileupload.esm-zvskgpnF.js";import"./ApplicationLogo-DltNY-8b.js";import"./transition-CH8N47gP.js";import"./inputtext.esm-BfOPbrgO.js";import"./index.esm-BVyL3PfI.js";import"./keyfilter.esm-EpLhoag2.js";import"./inputtextarea.esm-Csy78Q1G.js";import"./dropdown.esm-BlF-AyOP.js";import"./csstransition.esm-qN3COFcs.js";import"./index.esm-lNuoExQj.js";import"./button.esm-BCdY-iGx.js";import"./index.esm-BnBFkcEY.js";function Z({auth:h,warehouses:x}){const[o,j]=a.useState(""),[r,f]=a.useState(""),[l,v]=a.useState(""),[d,g]=a.useState(null),{data:u,setData:c,post:N,errors:m}=y({title:o,content:r,warehouse_id:l,photo:null});a.useEffect(()=>{c({title:o,content:r,warehouse_id:l,photo:u.photo})},[o,r,l,c]);const w=t=>{t.preventDefault(),N("/admin/warehouse_posts",u,{onSuccess:()=>L.push("/admin/warehouse_posts"),onError:s=>{console.error("倉庫掲示板データの保存に失敗しました:",s)},forceFormData:!0})},b=t=>{const s=t.files[0];if(s){c("photo",s);const p=new FileReader;p.onload=S=>{g(S.target.result)},p.readAsDataURL(s)}};return e.jsxs(I,{user:h.user,header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"倉庫掲示板作成"}),children:[e.jsx(F,{title:"倉庫掲示板作成"}),e.jsx("div",{className:"py-12 pt-4",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 text-gray-900",children:e.jsxs("form",{onSubmit:w,encType:"multipart/form-data",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"title",value:"タイトル"}),e.jsx(P,{id:"title",type:"text",className:"block mt-1 w-full",value:o,onChange:t=>j(t.target.value),required:!0,autoFocus:!0}),e.jsx(n,{message:m.title,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(i,{htmlFor:"content",value:"コンテンツ"}),e.jsx("textarea",{id:"content",className:"block mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:r,onChange:t=>f(t.target.value),required:!0,rows:"8"}),e.jsx(n,{message:m.content,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(i,{htmlFor:"warehouse_id",value:"倉庫"}),e.jsxs(C,{id:"warehouse_id",className:"block mt-1 w-full",value:l,onChange:t=>v(t.target.value),required:!0,children:[e.jsx("option",{value:"",children:"倉庫を選択してください"}),x.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx(n,{message:m.warehouse_id,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(i,{htmlFor:"photo",value:"画像（オプション）"}),e.jsx(E,{id:"photo",name:"photo",accept:"image/*",maxFileSize:2e6,emptyTemplate:e.jsx("p",{className:"m-0",children:"ここに画像をドラッグ&ドロップするか、クリックしてアップロードしてください。"}),onSelect:b,chooseLabel:"選択",uploadLabel:"アップロード",cancelLabel:"キャンセル",className:"mt-1",auto:!0,customUpload:!0,uploadHandler:t=>t.options.clear()}),e.jsx(n,{message:m.photo,className:"mt-2"}),d&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"mb-2 text-sm",children:"プレビュー:"}),e.jsx("img",{src:d,alt:"Preview",className:"max-w-xs rounded-md"})]})]}),e.jsx("div",{className:"flex justify-end items-center mt-4",children:e.jsx(_,{type:"submit",children:"作成"})})]})})})})})]})}export{Z as default};
