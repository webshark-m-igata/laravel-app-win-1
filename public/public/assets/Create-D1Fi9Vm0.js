import{r as c,m as _,j as e,L as y,$ as I}from"./app-BvcD1u3Q.js";import{A as C}from"./AuthenticatedLayout-DavmE3PF.js";import{T as F,a as p}from"./tabview.esm-ky1qsrXL.js";import{I as r}from"./InputLabel-DumfKsij.js";import"./TextInput-BbdOZX6r.js";import{I as o}from"./InputError-NcxwncOu.js";import{P as L}from"./PrimaryButton-BQ8oUedj.js";import{D as u}from"./dropdown.esm-DJz1tHkz.js";import{I as P}from"./inputtextarea.esm-39EwWhI0.js";import{F as S}from"./fileupload.esm-Do3KNevs.js";import{C as T}from"./card.esm-Bo2Itrsm.js";import"./ApplicationLogo-x-UA_P7B.js";import"./transition-BYwIw4Th.js";import"./index.esm-Cnyr4KP3.js";import"./index.esm-DvKaM37n.js";import"./csstransition.esm-DSYHq2DH.js";import"./inputtext.esm-5ium_0eV.js";import"./keyfilter.esm-COFDvRTx.js";import"./button.esm-Bi4iTYZQ.js";import"./index.esm-D455gHuh.js";import"./index.esm-rytv3sgJ.js";function Z({auth:x,posts:h,warehousePosts:g}){const[n,d]=c.useState(null),[j,f]=c.useState(0),{data:i,setData:a,post:b,processing:v,errors:t}=_({content:"",post_id:"",warehouse_post_id:"",image:null}),w=s=>{s.preventDefault(),b(route("admin.comments.store"))},N=s=>{const l=s.files[0];if(a("image",l),l){const m=new FileReader;m.onloadend=()=>{d(m.result)},m.readAsDataURL(l)}else d(null)};return e.jsxs(C,{user:x.user,header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"新規コメント作成"}),children:[e.jsx(y,{title:"新規コメント作成"}),e.jsx("div",{className:"py-12 pt-4",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 bg-white border-b border-gray-200",children:e.jsxs("form",{onSubmit:w,children:[e.jsxs(F,{activeIndex:j,onTabChange:s=>{f(s.index),s.index===0?a("warehouse_post_id",""):a("post_id","")},children:[e.jsx(p,{header:"投稿コメント",children:e.jsxs("div",{className:"mb-4",children:[e.jsx(r,{htmlFor:"post_id",value:"投稿"}),e.jsx(u,{id:"post_id",name:"post_id",value:i.post_id,options:h.map(s=>({label:s.title,value:s.id})),onChange:s=>{a("post_id",s.value)},placeholder:"投稿を選択",className:"block mt-1 w-full",filter:!0,filterPlaceholder:"検索..."}),e.jsx(o,{message:t.post_id,className:"mt-2"})]})}),e.jsx(p,{header:"倉庫投稿コメント",children:e.jsxs("div",{className:"mb-4",children:[e.jsx(r,{htmlFor:"warehouse_post_id",value:"倉庫投稿"}),e.jsx(u,{id:"warehouse_post_id",name:"warehouse_post_id",value:i.warehouse_post_id,options:g.map(s=>({label:s.title,value:s.id})),onChange:s=>{a("warehouse_post_id",s.value)},placeholder:"倉庫投稿を選択",className:"block mt-1 w-full",filter:!0,filterPlaceholder:"検索..."}),e.jsx(o,{message:t.warehouse_post_id,className:"mt-2"})]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(r,{htmlFor:"content",value:"コンテンツ"}),e.jsx(P,{id:"content",name:"content",value:i.content,onChange:s=>a("content",s.target.value),rows:5,className:"block p-2 mt-1 w-full",autoResize:!0}),e.jsx(o,{message:t.content,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(r,{htmlFor:"image",value:"画像"}),e.jsx(S,{id:"image",name:"image",accept:"image/*",maxFileSize:2e6,emptyTemplate:e.jsx("p",{className:"m-0",children:"ここに画像をドラッグ&ドロップするか、クリックしてアップロードしてください。"}),onSelect:N,chooseLabel:"選択",uploadLabel:"アップロード",cancelLabel:"キャンセル",className:"mt-1",auto:!0,customUpload:!0,uploadHandler:s=>s.options.clear()}),e.jsx(o,{message:t.image,className:"mt-2"}),n&&e.jsx(T,{className:"overflow-hidden p-0 mt-2",style:{maxWidth:"300px"},children:e.jsxs("div",{className:"p-2",children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"プレビュー:"}),e.jsx("img",{src:n,alt:"プレビュー",className:"object-contain w-full max-h-48 rounded-md"})]})})]}),e.jsxs("div",{className:"flex justify-between items-center mt-6",children:[e.jsx(I,{href:route("admin.comments.index"),className:"inline-flex items-center px-4 py-2 text-xs font-semibold tracking-widest text-gray-700 uppercase bg-gray-300 rounded-md border border-transparent transition duration-150 ease-in-out hover:bg-gray-400 active:bg-gray-400 focus:outline-none focus:border-gray-500 focus:shadow-outline-gray",children:"キャンセル"}),e.jsx(L,{type:"submit",disabled:v,severity:"success",children:"作成"})]})]})})})})})]})}export{Z as default};
