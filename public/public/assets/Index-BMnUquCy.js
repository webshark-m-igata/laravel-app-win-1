import{r,j as e,L as M,$ as l}from"./app-BpWF_zq6.js";import{A as T}from"./AuthenticatedLayout-Cia0Vt6E.js";import{d as R}from"./index-Ci0WszC2.js";import{D as m,C as s}from"./column.esm-o_G5tAGV.js";import{T as z,a as p}from"./tabview.esm-Bk1PA52T.js";import"./ApplicationLogo-C5H6nwKx.js";import"./transition-CPXQpZz6.js";import"./index.esm-vtogsqpO.js";import"./inputtext.esm-CiNcK0lE.js";import"./keyfilter.esm-shNeTo9H.js";import"./dropdown.esm-CgEdlw6j.js";import"./csstransition.esm-C-9dod2f.js";import"./index.esm-DLHf4VXQ.js";import"./index.esm-BW3I__JH.js";import"./button.esm-BmW90ZmM.js";import"./index.esm-KgL8FXsT.js";function X({auth:x,comments:i,search_content:b,search_user:f}){const[d,j]=r.useState(b||""),[n,g]=r.useState(f||""),[y,w]=r.useState(null),[v,N]=r.useState(null),[P,_]=r.useState(0),[C,S]=r.useState([]),[I,F]=r.useState([]);r.useEffect(()=>{const t=i.filter(a=>a.post_id!==null&&a.warehouse_post_id===null),o=i.filter(a=>a.warehouse_post_id!==null);console.log("投稿コメント数:",t.length),console.log("倉庫投稿コメント数:",o.length),o.length>0&&(console.log("倉庫投稿コメントサンプル:",o[0]),console.log("warehousePostプロパティ:",o[0].warehousePost)),S(t),F(o)},[i]);const c=t=>{confirm("このコメントを削除してもよろしいですか？")&&R.Inertia.delete(route("admin.comments.destroy",t))},h=t=>new Date(t).toLocaleDateString(),u=t=>t.image_path?e.jsx("div",{className:"overflow-hidden w-16 h-16",children:e.jsx("img",{src:`/storage/${t.image_path}`,alt:"コメント画像",className:"object-cover w-full h-full"})}):null;return e.jsxs(T,{user:x.user,header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"コメント一覧"}),children:[e.jsx(M,{title:"コメント管理"}),e.jsx("div",{className:"py-12 pt-4",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 bg-white border-b border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx(l,{href:route("admin.comments.create"),className:"inline-block px-4 py-2 font-bold text-white bg-blue-500 rounded hover:bg-blue-700",children:"新規コメント作成"}),e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"コンテンツで検索",className:"p-2 mr-2 rounded border",value:d,onChange:t=>j(t.target.value)}),e.jsx("input",{type:"text",placeholder:"ユーザー名で検索",className:"p-2 mr-2 rounded border",value:n,onChange:t=>g(t.target.value)}),e.jsx(l,{href:route("admin.comments.index",{search_content:d,search_user:n}),className:"px-4 py-2 font-bold text-white bg-blue-500 rounded hover:bg-blue-700",children:"検索"})]})]}),e.jsxs(z,{activeIndex:P,onTabChange:t=>_(t.index),className:"mb-4",children:[e.jsxs(p,{header:"投稿コメント",children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("span",{}),e.jsxs("span",{className:"p-input-icon-left",children:[e.jsx("i",{className:"pi pi-search"}),e.jsx("input",{type:"search",className:"p-inputtext p-component",placeholder:"グローバル検索...",onInput:t=>w(t.target.value)})]})]}),e.jsxs(m,{value:C,paginator:!0,rows:10,rowsPerPageOptions:[5,10,25,50],tableStyle:{minWidth:"50rem"},globalFilter:y,emptyMessage:"投稿コメントが見つかりません",sortMode:"multiple",removableSort:!0,resizableColumns:!0,columnResizeMode:"fit",className:"p-datatable-sm",stripedRows:!0,children:[e.jsx(s,{field:"user.name",header:"名前",sortable:!0,filter:!0,filterPlaceholder:"名前で検索",style:{width:"15%"},body:t=>t.user?t.user.name:"未設定"}),e.jsx(s,{field:"created_at",header:"作成日",sortable:!0,filter:!0,filterPlaceholder:"作成日で検索",style:{width:"10%"},body:t=>h(t.created_at)}),e.jsx(s,{field:"id",header:"ID",sortable:!0,filter:!0,filterPlaceholder:"IDで検索",style:{width:"5%"}}),e.jsx(s,{field:"content",header:"コンテンツ",sortable:!0,filter:!0,filterPlaceholder:"コンテンツで検索",style:{width:"45%"},body:t=>e.jsx("div",{className:"overflow-y-auto max-h-20",children:t.post?e.jsx(l,{href:route("post.show",t.post.id),className:"text-blue-600 hover:underline",children:t.content}):t.content})}),e.jsx(s,{field:"image_path",header:"画像",style:{width:"10%"},body:u}),e.jsx(s,{header:"操作",style:{width:"15%"},body:t=>e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(l,{href:route("admin.comments.edit",t.id),className:"px-2 py-1 font-bold text-center text-white bg-green-500 rounded hover:bg-green-700",children:"編集"}),e.jsx("button",{className:"px-2 py-1 font-bold text-white bg-red-500 rounded hover:bg-red-700",onClick:()=>c(t.id),children:"削除"})]})})]})]}),e.jsxs(p,{header:"倉庫投稿コメント",children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("span",{}),e.jsxs("span",{className:"p-input-icon-left",children:[e.jsx("i",{className:"pi pi-search"}),e.jsx("input",{type:"search",className:"p-inputtext p-component",placeholder:"グローバル検索...",onInput:t=>N(t.target.value)})]})]}),e.jsxs(m,{value:I,paginator:!0,rows:10,rowsPerPageOptions:[5,10,25,50],tableStyle:{minWidth:"50rem"},globalFilter:v,emptyMessage:"倉庫投稿コメントが見つかりません",sortMode:"multiple",removableSort:!0,resizableColumns:!0,columnResizeMode:"fit",className:"p-datatable-sm",stripedRows:!0,children:[e.jsx(s,{field:"user.name",header:"名前",sortable:!0,filter:!0,filterPlaceholder:"名前で検索",style:{width:"15%"},body:t=>t.user?t.user.name:"未設定"}),e.jsx(s,{field:"created_at",header:"作成日",sortable:!0,filter:!0,filterPlaceholder:"作成日で検索",style:{width:"10%"},body:t=>h(t.created_at)}),e.jsx(s,{field:"id",header:"ID",sortable:!0,filter:!0,filterPlaceholder:"IDで検索",style:{width:"5%"}}),e.jsx(s,{field:"content",header:"コンテンツ",sortable:!0,filter:!0,filterPlaceholder:"コンテンツで検索",style:{width:"45%"},body:t=>e.jsx("div",{className:"overflow-y-auto max-h-20",children:t.warehousePost?e.jsx(l,{href:route("warehouse.posts.show",t.warehousePost.id),className:"text-blue-600 hover:underline",children:t.content}):t.warehouse_post_id?e.jsx(l,{href:route("warehouse.posts.show",t.warehouse_post_id),className:"text-blue-600 hover:underline",children:t.content}):t.content})}),e.jsx(s,{field:"image_path",header:"画像",style:{width:"10%"},body:u}),e.jsx(s,{header:"操作",style:{width:"15%"},body:t=>e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(l,{href:route("admin.comments.edit",t.id),className:"px-2 py-1 font-bold text-center text-white bg-green-500 rounded hover:bg-green-700",children:"編集"}),e.jsx("button",{className:"px-2 py-1 font-bold text-white bg-red-500 rounded hover:bg-red-700",onClick:()=>c(t.id),children:"削除"})]})})]})]})]})]})})})})]})}export{X as default};
