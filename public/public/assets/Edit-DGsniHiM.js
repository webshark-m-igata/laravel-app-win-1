import{r as u,m as F,j as e,L,$ as P}from"./app-BpWF_zq6.js";import{A as k,N as l}from"./AuthenticatedLayout-Cia0Vt6E.js";import{I as t}from"./InputLabel-BiOPztuF.js";import"./TextInput-C1OGIzNU.js";import{I as o}from"./InputError-Bqut1ndV.js";import{P as C}from"./PrimaryButton-B9dUf_5g.js";import{T as S,a as p}from"./tabview.esm-Bk1PA52T.js";import{D as c}from"./dropdown.esm-CgEdlw6j.js";import{I as T}from"./inputtextarea.esm-BQXAVc5i.js";import{F as A}from"./fileupload.esm-D9j-4HwW.js";import"./ApplicationLogo-C5H6nwKx.js";import"./transition-CPXQpZz6.js";import"./inputtext.esm-CiNcK0lE.js";import"./index.esm-vtogsqpO.js";import"./keyfilter.esm-shNeTo9H.js";import"./button.esm-BmW90ZmM.js";import"./index.esm-BW3I__JH.js";import"./csstransition.esm-C-9dod2f.js";import"./index.esm-DLHf4VXQ.js";import"./index.esm-KgL8FXsT.js";function ee({auth:j,comment:a,posts:f,users:g,warehousePosts:b}){const[h,x]=u.useState(a.image_path?`/storage/${a.image_path}`:null),[v,_]=u.useState(a.post_id?0:1),{data:d,setData:i,post:N,processing:w,errors:r}=F({content:a.content,post_id:a.post_id||"",warehouse_post_id:a.warehouse_post_id||"",user_id:a.user_id,image:null,_method:"put"}),y=s=>{s.preventDefault(),N(route("admin.comments.update",a.id))},I=s=>{const m=s.files[0];if(i("image",m),m){const n=new FileReader;n.onloadend=()=>{x(n.result)},n.readAsDataURL(m)}else x(a.image_path?`/storage/${a.image_path}`:null)};return e.jsxs(k,{user:j.user,header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"コメント編集"}),children:[e.jsx(L,{title:"コメント編集"}),e.jsx("div",{className:"mx-auto mb-4 max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 bg-white border-b border-gray-200",children:e.jsxs("ul",{className:"flex overflow-x-auto p-2 m-0 list-none select-none surface-card",children:[e.jsx("li",{className:"flex-1",children:e.jsx(l,{href:"/dashboard/admin",children:"Admin ダッシュボード"})}),e.jsx("li",{className:"flex-1",children:e.jsx(l,{href:"/admin/users",children:"ユーザー管理"})}),e.jsx("li",{className:"flex-1",children:e.jsx(l,{href:"/admin/shops",children:"ショップ管理"})}),e.jsx("li",{className:"flex-1",children:e.jsx(l,{href:"/admin/warehouses",children:"倉庫管理"})}),e.jsx("li",{className:"flex-1",children:e.jsx(l,{href:"/admin/equipments",children:"備品管理"})}),e.jsx("li",{className:"flex-1",children:e.jsx(l,{href:"/admin/posts",children:"掲示板管理"})}),e.jsx("li",{className:"flex-1",children:e.jsx(l,{href:"/admin/warehouseposts",children:"倉庫掲示板管理"})}),e.jsx("li",{className:"flex-1",children:e.jsx(l,{href:"/admin/comments",children:"コメント管理"})})]})})})}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 bg-white border-b border-gray-200",children:e.jsxs("form",{onSubmit:y,children:[e.jsxs(S,{activeIndex:v,onTabChange:s=>{_(s.index),s.index===0?i("warehouse_post_id",""):i("post_id","")},children:[e.jsx(p,{header:"投稿コメント",children:e.jsxs("div",{className:"mb-4",children:[e.jsx(t,{htmlFor:"post_id",value:"投稿"}),e.jsx(c,{id:"post_id",name:"post_id",value:d.post_id,options:f.map(s=>({label:s.title,value:s.id})),onChange:s=>{i("post_id",s.value)},placeholder:"投稿を選択",className:"block mt-1 w-full",filter:!0,filterPlaceholder:"検索..."}),e.jsx(o,{message:r.post_id,className:"mt-2"})]})}),e.jsx(p,{header:"倉庫投稿コメント",children:e.jsxs("div",{className:"mb-4",children:[e.jsx(t,{htmlFor:"warehouse_post_id",value:"倉庫投稿"}),e.jsx(c,{id:"warehouse_post_id",name:"warehouse_post_id",value:d.warehouse_post_id,options:b.map(s=>({label:s.title,value:s.id})),onChange:s=>{i("warehouse_post_id",s.value)},placeholder:"倉庫投稿を選択",className:"block mt-1 w-full",filter:!0,filterPlaceholder:"検索..."}),e.jsx(o,{message:r.warehouse_post_id,className:"mt-2"})]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(t,{htmlFor:"user_id",value:"ユーザー"}),e.jsx(c,{id:"user_id",name:"user_id",value:d.user_id,options:g.map(s=>({label:s.name,value:s.id})),onChange:s=>i("user_id",s.value),placeholder:"ユーザーを選択",className:"block mt-1 w-full",filter:!0,filterPlaceholder:"検索..."}),e.jsx(o,{message:r.user_id,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(t,{htmlFor:"content",value:"コンテンツ"}),e.jsx(T,{id:"content",name:"content",value:d.content,onChange:s=>i("content",s.target.value),rows:5,className:"block p-2 mt-1 w-full",autoResize:!0}),e.jsx(o,{message:r.content,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(t,{htmlFor:"image",value:"画像"}),e.jsx(A,{id:"image",name:"image",accept:"image/*",maxFileSize:2e6,emptyTemplate:e.jsx("p",{className:"m-0",children:"ここに画像をドラッグ&ドロップするか、クリックしてアップロードしてください。"}),onSelect:I,chooseLabel:"選択",uploadLabel:"アップロード",cancelLabel:"キャンセル",className:"mt-1",auto:!0,customUpload:!0,uploadHandler:s=>s.options.clear()}),e.jsx(o,{message:r.image,className:"mt-2"}),h&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"プレビュー:"}),e.jsx("img",{src:h,alt:"プレビュー",className:"object-contain max-w-xs max-h-48 rounded-md"})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-6",children:[e.jsx(P,{href:route("admin.comments.index"),className:"inline-flex items-center px-4 py-2 text-xs font-semibold tracking-widest text-gray-700 uppercase bg-gray-300 rounded-md border border-transparent transition duration-150 ease-in-out hover:bg-gray-400 active:bg-gray-400 focus:outline-none focus:border-gray-500 focus:shadow-outline-gray",children:"キャンセル"}),e.jsx(C,{type:"submit",disabled:w,children:"更新"})]})]})})})})})]})}export{ee as default};
