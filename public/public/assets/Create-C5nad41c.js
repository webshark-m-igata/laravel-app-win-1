import{r as x,m as y,j as e,L as I,$ as L}from"./app-BpWF_zq6.js";import{A as C,N as a}from"./AuthenticatedLayout-Cia0Vt6E.js";import{T as F,a as h}from"./tabview.esm-Bk1PA52T.js";import{I as t}from"./InputLabel-BiOPztuF.js";import"./TextInput-C1OGIzNU.js";import{I as i}from"./InputError-Bqut1ndV.js";import{P}from"./PrimaryButton-B9dUf_5g.js";import{D as p}from"./dropdown.esm-CgEdlw6j.js";import{I as S}from"./inputtextarea.esm-BQXAVc5i.js";import{F as T}from"./fileupload.esm-D9j-4HwW.js";import{C as k}from"./card.esm-BuNzdVGd.js";import"./ApplicationLogo-C5H6nwKx.js";import"./transition-CPXQpZz6.js";import"./index.esm-vtogsqpO.js";import"./index.esm-BW3I__JH.js";import"./csstransition.esm-C-9dod2f.js";import"./inputtext.esm-CiNcK0lE.js";import"./keyfilter.esm-shNeTo9H.js";import"./button.esm-BmW90ZmM.js";import"./index.esm-DLHf4VXQ.js";import"./index.esm-KgL8FXsT.js";function ee({auth:u,posts:j,warehousePosts:f}){const[d,c]=x.useState(null),[g,b]=x.useState(0),{data:o,setData:l,post:v,processing:N,errors:r}=y({content:"",post_id:"",warehouse_post_id:"",image:null}),w=s=>{s.preventDefault(),v(route("admin.comments.store"))},_=s=>{const m=s.files[0];if(l("image",m),m){const n=new FileReader;n.onloadend=()=>{c(n.result)},n.readAsDataURL(m)}else c(null)};return e.jsxs(C,{user:u.user,header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"新規コメント作成"}),children:[e.jsx(I,{title:"新規コメント作成"}),e.jsx("div",{className:"mx-auto mb-4 max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 bg-white border-b border-gray-200",children:e.jsxs("ul",{className:"flex overflow-x-auto p-2 m-0 list-none select-none surface-card",children:[e.jsx("li",{className:"flex-1",children:e.jsx(a,{href:"/dashboard/admin",children:"Admin ダッシュボード"})}),e.jsx("li",{className:"flex-1",children:e.jsx(a,{href:"/admin/users",children:"ユーザー管理"})}),e.jsx("li",{className:"flex-1",children:e.jsx(a,{href:"/admin/shops",children:"ショップ管理"})}),e.jsx("li",{className:"flex-1",children:e.jsx(a,{href:"/admin/warehouses",children:"倉庫管理"})}),e.jsx("li",{className:"flex-1",children:e.jsx(a,{href:"/admin/equipments",children:"備品管理"})}),e.jsx("li",{className:"flex-1",children:e.jsx(a,{href:"/admin/posts",children:"掲示板管理"})}),e.jsx("li",{className:"flex-1",children:e.jsx(a,{href:"/admin/warehouseposts",children:"倉庫掲示板管理"})}),e.jsx("li",{className:"flex-1",children:e.jsx(a,{href:"/admin/comments",children:"コメント管理"})})]})})})}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 bg-white border-b border-gray-200",children:e.jsxs("form",{onSubmit:w,children:[e.jsxs(F,{activeIndex:g,onTabChange:s=>{b(s.index),s.index===0?l("warehouse_post_id",""):l("post_id","")},children:[e.jsx(h,{header:"投稿コメント",children:e.jsxs("div",{className:"mb-4",children:[e.jsx(t,{htmlFor:"post_id",value:"投稿"}),e.jsx(p,{id:"post_id",name:"post_id",value:o.post_id,options:j.map(s=>({label:s.title,value:s.id})),onChange:s=>{l("post_id",s.value)},placeholder:"投稿を選択",className:"block mt-1 w-full",filter:!0,filterPlaceholder:"検索..."}),e.jsx(i,{message:r.post_id,className:"mt-2"})]})}),e.jsx(h,{header:"倉庫投稿コメント",children:e.jsxs("div",{className:"mb-4",children:[e.jsx(t,{htmlFor:"warehouse_post_id",value:"倉庫投稿"}),e.jsx(p,{id:"warehouse_post_id",name:"warehouse_post_id",value:o.warehouse_post_id,options:f.map(s=>({label:s.title,value:s.id})),onChange:s=>{l("warehouse_post_id",s.value)},placeholder:"倉庫投稿を選択",className:"block mt-1 w-full",filter:!0,filterPlaceholder:"検索..."}),e.jsx(i,{message:r.warehouse_post_id,className:"mt-2"})]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(t,{htmlFor:"content",value:"コンテンツ"}),e.jsx(S,{id:"content",name:"content",value:o.content,onChange:s=>l("content",s.target.value),rows:5,className:"block p-2 mt-1 w-full",autoResize:!0}),e.jsx(i,{message:r.content,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(t,{htmlFor:"image",value:"画像"}),e.jsx(T,{id:"image",name:"image",accept:"image/*",maxFileSize:2e6,emptyTemplate:e.jsx("p",{className:"m-0",children:"ここに画像をドラッグ&ドロップするか、クリックしてアップロードしてください。"}),onSelect:_,chooseLabel:"選択",uploadLabel:"アップロード",cancelLabel:"キャンセル",className:"mt-1",auto:!0,customUpload:!0,uploadHandler:s=>s.options.clear()}),e.jsx(i,{message:r.image,className:"mt-2"}),d&&e.jsx(k,{className:"overflow-hidden p-0 mt-2",style:{maxWidth:"300px"},children:e.jsxs("div",{className:"p-2",children:[e.jsx("p",{className:"mb-1 text-sm text-gray-600",children:"プレビュー:"}),e.jsx("img",{src:d,alt:"プレビュー",className:"object-contain w-full max-h-48 rounded-md"})]})})]}),e.jsxs("div",{className:"flex justify-between items-center mt-6",children:[e.jsx(L,{href:route("admin.comments.index"),className:"inline-flex items-center px-4 py-2 text-xs font-semibold tracking-widest text-gray-700 uppercase bg-gray-300 rounded-md border border-transparent transition duration-150 ease-in-out hover:bg-gray-400 active:bg-gray-400 focus:outline-none focus:border-gray-500 focus:shadow-outline-gray",children:"キャンセル"}),e.jsx(P,{type:"submit",disabled:N,severity:"success",children:"作成"})]})]})})})})})]})}export{ee as default};
