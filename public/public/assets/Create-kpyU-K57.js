import{m as f,r as N,j as e,L as g}from"./app-yTh-YxTC.js";import{A as b}from"./AuthenticatedLayout-C_1Nqe5A.js";import{I as l}from"./InputError-B2TmcUpv.js";import{I as o}from"./InputLabel-CraIE3uT.js";import{P as w}from"./PrimaryButton-wFxxeskN.js";import{T as y}from"./TextInput-C5NCLnli.js";import{D as F}from"./dropdown.esm-BlF-AyOP.js";import{F as L}from"./fileupload.esm-zvskgpnF.js";import{I}from"./inputtextarea.esm-Csy78Q1G.js";import"./ApplicationLogo-DltNY-8b.js";import"./transition-CH8N47gP.js";import"./button.esm-BCdY-iGx.js";import"./index.esm-BVyL3PfI.js";import"./inputtext.esm-BfOPbrgO.js";import"./keyfilter.esm-EpLhoag2.js";import"./csstransition.esm-qN3COFcs.js";import"./index.esm-lNuoExQj.js";import"./index.esm-BnBFkcEY.js";function M({shops:c}){const{data:m,setData:s,post:d,processing:p,errors:a,reset:x}=f({title:"",content:"",shop_id:"",photo:null}),[i,h]=N.useState(null),u=t=>{t.preventDefault(),d(route("post.store"),{onSuccess:()=>x()})},j=t=>{const r=t.files[0];if(r){s("photo",r);const n=new FileReader;n.onload=v=>{h(v.target.result)},n.readAsDataURL(r)}};return e.jsxs(b,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"新規投稿作成"}),children:[e.jsx(g,{title:"新規投稿作成"}),e.jsx("div",{className:"py-12 pt-4",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 text-gray-900",children:e.jsxs("form",{onSubmit:u,encType:"multipart/form-data",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(o,{htmlFor:"title",value:"タイトル"}),e.jsx(y,{id:"title",type:"text",name:"title",value:m.title,className:"block mt-1 w-full",onChange:t=>s("title",t.target.value),required:!0}),e.jsx(l,{message:a.title,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(o,{htmlFor:"shop_id",value:"ショップ"}),e.jsx(F,{id:"shop_id",value:m.shop_id,options:c.map(t=>({label:t.name,value:t.id})),onChange:t=>s("shop_id",t.value),placeholder:"ショップを選択",className:"block mt-1 w-full",required:!0}),e.jsx(l,{message:a.shop_id,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(o,{htmlFor:"content",value:"内容"}),e.jsx(I,{id:"content",value:m.content,onChange:t=>s("content",t.target.value),style:{height:"320px"},className:"block p-2 mt-1 w-full",rows:10}),e.jsx(l,{message:a.content,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(o,{htmlFor:"photo",value:"画像（任意）"}),e.jsx(L,{id:"photo",name:"photo",accept:"image/*",maxFileSize:2e6,emptyTemplate:e.jsx("p",{className:"m-0",children:"ここに画像をドラッグ&ドロップするか、クリックしてアップロードしてください。"}),onSelect:j,chooseLabel:"選択",uploadLabel:"アップロード",cancelLabel:"キャンセル",className:"mt-1",auto:!0,customUpload:!0,uploadHandler:t=>t.options.clear()}),e.jsx(l,{message:a.photo,className:"mt-2"}),i&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"mb-2 text-sm",children:"プレビュー:"}),e.jsx("img",{src:i,alt:"Preview",className:"max-w-xs rounded-md"})]})]}),e.jsx("div",{className:"flex justify-end items-center mt-4",children:e.jsx(w,{className:"ml-4",disabled:p,children:"投稿する"})})]})})})})})]})}export{M as default};
