import{r as c,m as _,j as e,L as y,$ as L}from"./app-D15uHu8v.js";import{A as I}from"./AuthenticatedLayout-DAVqwqhD.js";import{T as C,a as u}from"./tabview.esm-BONc9HsG.js";import{I as l}from"./InputLabel-ay4s_AAP.js";import"./TextInput-Diu6HVu7.js";import{I as r}from"./InputError-zGy_9eYl.js";import{P as F}from"./PrimaryButton-BIkkRLjL.js";import{D as p}from"./dropdown.esm-aXO8Fzt3.js";import{I as P}from"./inputtextarea.esm-UIqw5GRM.js";import{F as k}from"./fileupload.esm-CYb6dFuB.js";import"./ApplicationLogo-wBmO382G.js";import"./transition-D_4-xP8q.js";import"./index.esm-CsaMsn2H.js";import"./index.esm-DqJY4ey0.js";import"./csstransition.esm-d_U1Ywqq.js";import"./inputtext.esm-pnuprOg1.js";import"./keyfilter.esm-BFZpD1XT.js";import"./button.esm-BRKb10Wf.js";import"./index.esm-DKhWp-KS.js";import"./index.esm-CudRFHm8.js";function X({auth:x,posts:h,warehousePosts:g}){const[d,o]=c.useState(null),[b,j]=c.useState(0),{data:i,setData:a,post:v,processing:f,errors:t}=_({content:"",post_id:"",warehouse_post_id:"",image:null}),w=s=>{s.preventDefault(),v(route("admin.comments.store"))},N=s=>{const n=s.files[0];if(a("image",n),n){const m=new FileReader;m.onloadend=()=>{o(m.result)},m.readAsDataURL(n)}else o(null)};return e.jsxs(I,{user:x.user,header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"新規コメント作成"}),children:[e.jsx(y,{title:"新規コメント作成"}),e.jsx("div",{className:"py-12 pt-4",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 bg-white border-b border-gray-200",children:e.jsxs("form",{onSubmit:w,children:[e.jsxs(C,{activeIndex:b,onTabChange:s=>{j(s.index),s.index===0?a("warehouse_post_id",""):a("post_id","")},children:[e.jsx(u,{header:"投稿コメント",children:e.jsxs("div",{className:"mb-4",children:[e.jsx(l,{htmlFor:"post_id",value:"投稿"}),e.jsx(p,{id:"post_id",name:"post_id",value:i.post_id,options:h.map(s=>({label:s.title,value:s.id})),onChange:s=>{a("post_id",s.value)},placeholder:"投稿を選択",className:"block mt-1 w-full",filter:!0,filterPlaceholder:"検索..."}),e.jsx(r,{message:t.post_id,className:"mt-2"})]})}),e.jsx(u,{header:"倉庫投稿コメント",children:e.jsxs("div",{className:"mb-4",children:[e.jsx(l,{htmlFor:"warehouse_post_id",value:"倉庫投稿"}),e.jsx(p,{id:"warehouse_post_id",name:"warehouse_post_id",value:i.warehouse_post_id,options:g.map(s=>({label:s.title,value:s.id})),onChange:s=>{a("warehouse_post_id",s.value)},placeholder:"倉庫投稿を選択",className:"block mt-1 w-full",filter:!0,filterPlaceholder:"検索..."}),e.jsx(r,{message:t.warehouse_post_id,className:"mt-2"})]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(l,{htmlFor:"content",value:"コンテンツ"}),e.jsx(P,{id:"content",name:"content",value:i.content,onChange:s=>a("content",s.target.value),rows:5,className:"block p-2 mt-1 w-full",autoResize:!0}),e.jsx(r,{message:t.content,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(l,{htmlFor:"image",value:"画像"}),e.jsx(k,{id:"image",name:"image",accept:"image/*",maxFileSize:2e6,emptyTemplate:e.jsx("p",{className:"m-0",children:"ここに画像をドラッグ&ドロップするか、クリックしてアップロードしてください。"}),onSelect:N,chooseLabel:"選択",uploadLabel:"アップロード",cancelLabel:"キャンセル",className:"mt-1",auto:!0,customUpload:!0,uploadHandler:s=>s.options.clear()}),e.jsx(r,{message:t.image,className:"mt-2"}),d&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"mb-2 text-sm",children:"プレビュー:"}),e.jsxs("div",{className:"inline-block relative",children:[e.jsx("img",{src:d,alt:"Preview",className:"max-w-xs rounded-md"}),e.jsx("button",{type:"button",onClick:()=>{a("image",null),o(null)},className:"absolute top-0 right-0 p-1 text-white bg-red-500 rounded-full hover:bg-red-700",style:{transform:"translate(50%, -50%)"},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-6",children:[e.jsx(L,{href:route("admin.comments.index"),className:"inline-flex items-center px-4 py-2 text-xs font-semibold tracking-widest text-gray-700 uppercase bg-gray-300 rounded-md border border-transparent transition duration-150 ease-in-out hover:bg-gray-400 active:bg-gray-400 focus:outline-none focus:border-gray-500 focus:shadow-outline-gray",children:"キャンセル"}),e.jsx(F,{type:"submit",disabled:f,severity:"success",children:"作成"})]})]})})})})})]})}export{X as default};
