import{r as g,m as N,j as e,L as b}from"./app-BvcD1u3Q.js";import{A as w}from"./AuthenticatedLayout-DavmE3PF.js";import{I as l}from"./InputError-NcxwncOu.js";import{I as m}from"./InputLabel-DumfKsij.js";import{P as y}from"./PrimaryButton-BQ8oUedj.js";import{T as F}from"./TextInput-BbdOZX6r.js";import{D as L}from"./dropdown.esm-DJz1tHkz.js";import{F as P}from"./fileupload.esm-Do3KNevs.js";import{I as _}from"./inputtextarea.esm-39EwWhI0.js";import"./ApplicationLogo-x-UA_P7B.js";import"./transition-BYwIw4Th.js";import"./button.esm-Bi4iTYZQ.js";import"./index.esm-Cnyr4KP3.js";import"./inputtext.esm-5ium_0eV.js";import"./keyfilter.esm-COFDvRTx.js";import"./csstransition.esm-DSYHq2DH.js";import"./index.esm-D455gHuh.js";import"./index.esm-rytv3sgJ.js";function M({post:s,shops:c}){const[n,p]=g.useState(s.photo?`/storage/${s.photo}`:null),{data:r,setData:a,post:h,processing:x,errors:o,reset:u}=N({title:s.title,content:s.content,shop_id:s.shop_id,photo:null,_method:"PATCH"}),j=t=>{t.preventDefault(),h(route("post.update",s.id),{onSuccess:()=>u()})},v=t=>{const i=t.files[0];if(i){a("photo",i);const d=new FileReader;d.onload=f=>{p(f.target.result)},d.readAsDataURL(i)}};return e.jsxs(w,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"投稿編集"}),children:[e.jsx(b,{title:"投稿編集"}),e.jsx("div",{className:"py-12 pt-4",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6 text-gray-900",children:e.jsxs("form",{onSubmit:j,encType:"multipart/form-data",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(m,{htmlFor:"title",value:"タイトル"}),e.jsx(F,{id:"title",type:"text",name:"title",value:r.title,className:"block mt-1 w-full",onChange:t=>a("title",t.target.value),required:!0}),e.jsx(l,{message:o.title,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(m,{htmlFor:"shop_id",value:"ショップ"}),e.jsx(L,{id:"shop_id",value:r.shop_id,options:c.map(t=>({label:t.name,value:t.id})),onChange:t=>a("shop_id",t.value),placeholder:"ショップを選択",className:"block mt-1 w-full",required:!0}),e.jsx(l,{message:o.shop_id,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(m,{htmlFor:"content",value:"内容"}),e.jsx(_,{id:"content",value:r.content,onChange:t=>a("content",t.target.value),style:{height:"320px"},className:"block p-2 mt-1 w-full",rows:10}),e.jsx(l,{message:o.content,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(m,{htmlFor:"photo",value:"写真（オプション）"}),e.jsx(P,{id:"photo",name:"photo",accept:"image/*",maxFileSize:2e6,emptyTemplate:e.jsx("p",{className:"m-0",children:"ここに画像をドラッグ&ドロップするか、クリックしてアップロードしてください。"}),onSelect:v,chooseLabel:"選択",uploadLabel:"アップロード",cancelLabel:"キャンセル",className:"mt-1",auto:!0,customUpload:!0,uploadHandler:t=>t.options.clear()}),e.jsx(l,{message:o.photo,className:"mt-2"}),n&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"mb-2 text-sm",children:"現在の写真（新しい写真をアップロードすると置き換えられます）:"}),e.jsx("img",{src:n,alt:"Preview",className:"max-w-xs rounded-md"})]})]}),e.jsx("div",{className:"flex justify-end items-center mt-4",children:e.jsx(y,{className:"ml-4",disabled:x,children:"更新"})})]})})})})})]})}export{M as default};
